<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="up1">

  <xacro:include filename="$(find up1_description)/urdf/mono_arm_module/arm.gazebo.xacro" />

  <!-- ============================   Arm   ============================ -->
  <xacro:macro name="arm" params="prefix reflect">

    <!-- Arm Joint 1 -->
    <joint name="${prefix}_armroot_to_armlink1" type="revolute">
      <parent link="armroot_link" />
      <child link="${prefix}_armlink1" />
      <origin rpy="0 0 0" xyz="0 0 0" />
      <axis xyz="0 0 1" />
      <limit lower="${armlink1_limit_lower}" upper="${armlink1_limit_upper}" velocity="${armlink1_velocity}" effort="${armlink1_effort}" />
    </joint>
    <!-- Arm Link 1 -->
    <link name="${prefix}_armlink1">
      <visual>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink1.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <material name="white" />
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink1.stl" scale="0.001 0.001 0.001" />
        </geometry>
      </collision>
      <inertial>
        <mass value="0.17905"/>
        <!-- inertia is wrong, get update from Daniel -->
        <inertia ixx="0.00023448766" ixy="0.0000000027" ixz="0.00000001913"
                 iyy="0.00024004726" iyz="-0.0000015393" izz="0.00007431363"/>
      </inertial>
    </link>

    <!-- Arm Joint 2 -->
    <joint name="${prefix}_armlink1_to_armlink2" type="revolute">
      <parent link="${prefix}_armlink1" />
      <child link="${prefix}_armlink2" />
      <origin rpy="0 0 0" xyz="0 0 0" />
      <axis xyz="0 0 ${reflect*1}" />
      <limit lower="${armlink2_limit_lower}" upper="${armlink2_limit_upper}" velocity="${armlink2_velocity}" effort="${armlink2_effort}" />
    </joint>
    <!-- Arm Link 2 -->
    <link name="${prefix}_armlink2">
      <visual>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink2.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <material name="white" />
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink2.stl" scale="0.001 0.001 0.001" />
        </geometry>
      </collision>
      <inertial>
        <mass value="0.49779"/>
        <!-- inertia is wrong, get update from Daniel -->
        <inertia ixx="0.00029708797" ixy="-0.00000000444" ixz="0.00000000068"
                 iyy="0.0000799845" iyz="-0.00000174097" izz="0.00026073683"/>
      </inertial>
    </link>

    <!-- Arm Joint 3 -->
    <joint name="${prefix}_armlink2_to_armlink3" type="revolute">
      <parent link="${prefix}_armlink2" />
      <child link="${prefix}_armlink3" />
      <origin rpy="0 0 0" xyz="0 0 0" />
      <axis xyz="0 0 -1" />
      <limit lower="${armlink3_limit_lower}" upper="${armlink3_limit_upper}" velocity="${armlink3_velocity}" effort="${armlink3_effort}" />
    </joint>
    <!-- Arm Link 3 -->
    <link name="${prefix}_armlink3">
      <visual>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink3.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <material name="white" />
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink3.stl" scale="0.001 0.001 0.001" />
        </geometry>
      </collision>
      <inertial>
        <mass value="0.04828"/>
        <inertia ixx="0.00010408822" ixy="0.00000002684" ixz="0.00000006554"
                 iyy="0.00008358122" iyz="0.00000001571" izz="0.00004453887"/>
      </inertial>
    </link>

    <!-- Arm Joint 4 -->
    <joint name="${prefix}_armlink3_to_armlink4" type="revolute">
      <parent link="${prefix}_armlink3" />
      <child link="${prefix}_armlink4" />
      <origin rpy="0 0 0" xyz="0 0 0" />
      <axis xyz="0 0 ${reflect*1}" />
      <limit lower="${armlink4_limit_lower}" upper="${armlink4_limit_upper}" velocity="${armlink4_velocity}" effort="${armlink4_effort}" />
    </joint>
    <!-- Arm Link 4 -->
    <link name="${prefix}_armlink4">
      <visual>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink4.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <material name="white" />
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink4.stl" scale="0.001 0.001 0.001" />
        </geometry>
      </collision>
      <inertial>
        <mass value="0.07021"/>
        <inertia ixx="0.00022365714" ixy="0.00000581335" ixz="-0.00000002583"
                 iyy="0.00004497277" iyz="0.00000036702" izz="0.00022294807"/>
      </inertial>
    </link>

    <!-- Arm Joint 5 -->
    <joint name="${prefix}_armlink4_to_armlink5" type="revolute">
      <parent link="${prefix}_armlink4" />
      <child link="${prefix}_armlink5" />
      <origin rpy="0 0 0" xyz="0 0 0" />
      <axis xyz="0 0 ${-reflect*1}" />
      <limit lower="${armlink5_limit_lower}" upper="${armlink5_limit_upper}" velocity="${armlink5_velocity}" effort="${armlink5_effort}" />
    </joint>
    <!-- Arm Link 5 -->
    <link name="${prefix}_armlink5">
      <visual>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink5.stl" scale="0.001 0.001 0.001" />
        </geometry>
        <material name="white" />
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/armlink5.stl" scale="0.001 0.001 0.001" />
        </geometry>
      </collision>
      <inertial>
        <mass value="0.07134"/>
        <inertia ixx="0.00024486788" ixy="-0.00000179765" ixz="-0.0000013121"
                 iyy="0.00007141374" iyz="0.00000015595" izz="0.0002397239"/>
      </inertial>
    </link>

    <!-- Gripper Joint -->
    <joint name="${prefix}_gripper" type="fixed">
      <parent link="${prefix}_armlink5" />
      <child link="${prefix}_gripper" />
      <origin rpy="0 0 0" xyz="0 0 0" />
    </joint>
    <!-- Gripper -->
    <link name="${prefix}_gripper" />

    <xacro:arm_gazebo prefix="${prefix}" />

  </xacro:macro>

</robot>
