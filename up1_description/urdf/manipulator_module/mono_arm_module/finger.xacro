<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="up1">

  <xacro:include filename="$(find up1_description)/urdf/manipulator_module/mono_arm_module/finger.gazebo.xacro" />
  <xacro:include filename="$(find up1_description)/urdf/manipulator_module/mono_arm_module/finger.transmission.xacro" />

  <xacro:property name="finger_offset_x" value="0.0" />
  <xacro:property name="finger_offset_y" value="0.0" />
  <xacro:property name="finger_offset_z" value="0.07961" />

  <xacro:property name="finger_limit_upper" value="0.018" />
  <xacro:property name="finger_velocity" value="1" />
  <xacro:property name="finger_effort" value="6.0" />

  <xacro:macro name="finger" params="prefix num reflect flip fake">
    <!-- ============================   Finger   ============================ -->

    <!-- Finger Joint -->
    <joint name="${prefix}_finger_joint${fake}" type="prismatic">
      <parent link="${prefix}_gripper" />
      <child link="${prefix}_finger${num}" />
      <origin rpy="0 0 0"
        xyz="${reflect*finger_offset_x} ${finger_offset_y} ${finger_offset_z}" />
      <axis xyz="0 1 0" />
      <limit lower="0" upper="${finger_limit_upper}" velocity="${finger_velocity}" effort="${finger_effort}" />
    </joint>
    <!-- Finger Link 1 -->
    <link name="${prefix}_finger${num}">
      <visual>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/finger_${num}_viz.dae" scale="0.001 0.001 0.001" />
        </geometry>
        <material name="light grey" />
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://up1_description/meshes/mono_arm/finger_${num}.stl" scale="0.001 0.001 0.001" />
        </geometry>
      </collision>
      <inertial>
        <mass value="0.01174"/>
        <inertia ixx="0.00000285949" ixy="-0.00000001641" ixz="0.00000001803"
                 iyy="0.00000203198" iyz="-0.00000077289" izz="0.00000299021"/>
      </inertial>
    </link>

    <xacro:finger_gazebo prefix="${prefix}" />
    <xacro:finger_transmission prefix="${prefix}" />

  </xacro:macro>

</robot>
